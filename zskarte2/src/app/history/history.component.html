<!--
  ~ Copyright Â© 2018 ZSO Bern Plus
  ~
  ~ This file is part of Zivilschutzkarte 2.
  ~
  ~ Zivilschutzkarte 2 is free software: you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the
  ~ Free Software Foundation, either version 3 of the License, or (at your option)
  ~ any later version.
  ~
  ~ Zivilschutzkarte 2 is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
  ~ FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License along with
  ~ Zivilschutzkarte 2.  If not, see <http://www.gnu.org/licenses/>.
  ~
  ~
  -->

<mat-card id="history" *ngIf="showHistory">
    <mat-card-content>

        <mat-checkbox [(ngModel)]="filtered" class="filter">{{i18n.get('filterHistory')}}</mat-checkbox>
        <div class="selector">
            <div #indicator [class]="historyDatesLocale ? 'visible indicator' : 'hidden indicator'"><i
                    class="material-icons">chevron_right</i></div>
            <div class="timeline" (scroll)="handleScroll($event)" #timeline>
                <div class="startSpacer" #startSpacer></div>
                <div *ngFor="let historyDate of historyDatesLocale;  index as i"
                     (click)="goToIndex(i, 0)" class="event"><span class="date">{{historyDate}}</span><span class="tag">{{getTag(i)}}<i [title]="i18n.get('removeTag')" class="material-icons" (click)="removeTag(i)" *ngIf="getTag(i)">delete</i></span></div>
                <div class="endSpacer"></div>
            </div>
            <div class="loader" *ngIf="loading">
                <mat-progress-spinner
                        color="primary"
                        mode="indeterminate">
                </mat-progress-spinner>
            </div>
        </div>
        <div class="buttons">
            <button mat-raised-button color="primary"
                    (click)="toggleHistoryMode()">{{i18n.get("endHistoryMode")}}</button>
        </div>
    </mat-card-content>
</mat-card>