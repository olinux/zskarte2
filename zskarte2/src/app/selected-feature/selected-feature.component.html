<mat-card class="selection" *ngIf="selectedSignature!=null">
    <mat-card-content *ngIf="!mergeMode">
        <div class="menu-wrapper">
            <button mat-mini-fab class="menu" [matMenuTriggerFor]="signatureMenu">
                <i class="material-icons">menu</i>
            </button>
        </div>
        <div class="imgwrapper" *ngIf="selectedSignature.src!=null"><img [src]="getImageUrl(selectedSignature.src)"/>
        </div>
        <div class="imgcustomwrapper" *ngIf="selectedSignature.dataUrl!=null"><img [src]="selectedSignature.dataUrl"/>
        </div>

        <div *ngIf="selectedSignature[i18n.locale]!=null" class="label">{{selectedSignature[i18n.locale]}}</div>
        <div>
            <mat-form-field *ngIf="!selectedSignature.text">
                <mat-label>{{i18n.get("name")}}</mat-label>
                <input type="text" matInput [(ngModel)]="selectedSignature.label"/>
            </mat-form-field>
            <mat-form-field *ngIf="selectedSignature.text">
                <mat-label>{{i18n.get("name")}}</mat-label>
                <textarea matInput [(ngModel)]="selectedSignature.text" (ngModelChange)="redraw()"></textarea>
            </mat-form-field>
            <mat-form-field *ngIf="selectedSignature.kat!==null">
                <mat-label>{{i18n.get("rotate")}}</mat-label>
                <mat-slider
                        [max]="180"
                        [min]="-180"
                        [step]="1"
                        [ngModel]="rotationPercent"
                        (ngModelChange)="setRotation($event)">
                </mat-slider>
                <input type="text" matInput hidden value="-"/>
            </mat-form-field>
            <mat-form-field *ngIf="selectedSignature.type==='Polygon' || selectedSignature.type==='Circle'">
                <mat-label>{{i18n.get("opacity")}}:</mat-label>
                <mat-slider #ctrl="ngModel"
                            [max]="1"
                            [min]="0"
                            [step]="0.05"
                            [(ngModel)]="selectedSignature.fillOpacity" (ngModelChange)="redraw()">
                </mat-slider>
                <input type="text" matInput hidden value="-"/>
            </mat-form-field>

            <mat-form-field *ngIf="selectedSignature.type==='Polygon' || selectedSignature.type==='Circle'">
                <mat-label>{{i18n.get("lineWidth")}}</mat-label>
                <mat-slider [max]="4"
                            [min]="0.1"
                            [step]="0.1"
                            [(ngModel)]="selectedSignature.strokeWidth" (ngModelChange)="redraw()">
                </mat-slider>
                <input type="text" matInput hidden value="-"/>
            </mat-form-field>

            <mat-form-field *ngIf="selectedSignature.text">
                <mat-label>{{i18n.get("fontSize")}}</mat-label>
                <mat-slider [max]="4"
                            [min]="0.1"
                            [step]="0.1"
                            [(ngModel)]="selectedSignature.fontSize" (ngModelChange)="redraw()">
                </mat-slider>
                <input type="text" matInput hidden value="-"/>
            </mat-form-field>
            <mat-form-field *ngIf="selectedSignature.type!=='Point'">
                <mat-label>{{i18n.get("line")}}:</mat-label>
                <select #ctrl="ngModel" matNativeControl [(ngModel)]="selectedSignature.style"
                        (ngModelChange)="redraw()">
                    <option value="solid">{{i18n.get("solidLine")}}</option>
                    <option value="dash">{{i18n.get("dashedLine")}}</option>
                </select>
            </mat-form-field>

            <mat-form-field *ngIf="selectedSignature.kat===null">
                <mat-label>{{i18n.get("color")}}:</mat-label>
                <input matInput type="color" name="color" [(ngModel)]="selectedSignature.color"
                       (ngModelChange)="redraw()"/>
            </mat-form-field>


        </div>
        <mat-menu #signatureMenu="matMenu">

            <button mat-menu-item (click)="bringToFront()">
                <i
                        class="material-icons">arrow_upward</i><span>{{i18n.get("moveToTop")}}</span></button>
            <button mat-menu-item (click)="sendToBack()">
                <i
                        class="material-icons">arrow_downward</i><span>{{i18n.get("moveToBottom")}}</span></button>
            <button mat-menu-item (click)="split()"
                    *ngIf="(selectedSignature.type==='Polygon' || selectedSignature.type==='MultiPolygon') && canSplit">
                <i
                        class="material-icons">call_split</i><span>{{i18n.get("ungroup")}}</span></button>
            <button mat-menu-item (click)="merge(true)"
                    *ngIf="selectedSignature.type==='Polygon' || selectedSignature.type==='MultiPolygon'"><i
                    class="material-icons">call_merge</i><span> {{i18n.get("group")}}</span></button>
            <button mat-menu-item (click)="drawHole()" [disabled]="drawHoleMode"
                    *ngIf="selectedSignature.type==='Polygon' || selectedSignature.type==='MultiPolygon'"><i
                    class="material-icons">vignette</i><span> {{i18n.get("drawHole")}}</span></button>
            <button mat-menu-item color="primary" (click)="delete()"><i
                    class="material-icons">delete</i><span>{{i18n.get("delete")}}</span></button>
        </mat-menu>
    </mat-card-content>
    <mat-card-content *ngIf="mergeMode">
        <div>Zu gruppierende Fläche auswählen</div>
        <button mat-raised-button (click)="merge(false)" [disabled]="drawHoleMode"
                *ngIf="selectedSignature.type==='Polygon' || selectedSignature.type==='MultiPolygon'"><i
                class="material-icons">cancel</i><span> {{i18n.get("cancelGrouping")}}</span></button>
    </mat-card-content>
</mat-card>
